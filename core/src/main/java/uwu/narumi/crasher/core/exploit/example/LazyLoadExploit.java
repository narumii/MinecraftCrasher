package uwu.narumi.crasher.core.exploit.example;

import uwu.narumi.crasher.api.exception.ExploitException;
import uwu.narumi.crasher.api.exploit.Exploit;
import uwu.narumi.crasher.api.exploit.ExploitInfo;
import uwu.narumi.crasher.api.exploit.argument.Argument;
import uwu.narumi.crasher.api.optimizer.Optimizer;
import uwu.narumi.crasher.api.packet.Packet;

@ExploitInfo(
    name = "Example",
    description = "Example",
    usage = "exploit example"
)
public class LazyLoadExploit extends Exploit<Packet> {

  public LazyLoadExploit() {
    super(() -> Packet.builder().id(0).data(new byte[]{0, 0, 0}).build(),
        new Argument("amount", 0, Integer.class));
  }

  @Override
  public void execute(Object... args) throws ExploitException {
    int amount = (int) args[0];
    Optimizer.startOptimizing(LazyLoadExploit.class);
    Optimizer.post(() -> {
      //YOUR STUFF
      System.out.println(exploitSource().get().toString());
      Optimizer.update();
    }, amount);
  }
}
